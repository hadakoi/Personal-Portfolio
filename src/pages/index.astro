---
import '../styles/main.css';
import fs from 'node:fs';
import path from 'node:path';

import Head from '../components/Head.astro';
import LeftPanel from '../components/LeftPanel.astro';
import TabPanel from '../components/TabPanel.astro';
import MobileNav from '../components/MobileNav.astro';
import TypewriterScript from '../components/TypewriterScript.astro';
import InteractivityScript from '../components/InteractivityScript.astro';

// Data
const currentYear = new Date().getFullYear();
const quotesPath = path.join(process.cwd(), 'src/data/quotes.jsonl');
const quotesRaw = fs.readFileSync(quotesPath, 'utf-8');
const quotes = quotesRaw.trim().split('\n').map(line => JSON.parse(line));

// Config
const siteUrl = 'https://hadakoi.tech';
const seo = {
  title: 'Aryan Kudva',
  author: 'Aryan Kudva',
};

const ASCII_ART = `
                 _.---,_
               .'       \`'.
                \\    __..-'\\
                 }-"\`       \\
                /__,,..---.._|
                \\            |
                |---..__     |
               /        \`\`"-./
             .'---...__      |
           .'          \`\`"-./
      ,--./...,,,__        /
      '--.'__    __\`\`\`.-. /._
        / \`  \`  '  \`=/.-.|-._)
        | .-.  .-.  "\\\\  /
        || O| | O|  ""=='_\\
      .-' '-'o '-'    ""=\\\`
\`''--/-              ""=-,\\--._
.---|-            ( ""=-. \\\`
    \\             /\`)"=."=|'-.
     '.       _.-' '  "=|\\|
       (\`----\`    '="=|/
        \`-.       "=/\`
           '.     =/
             \\   =|
  .-.        |\` "=|
 (   ~._     | "==|        _.-~\`\\
  \\     ~.   |'"="|    _.-~      )
   ;      ~-.|.-._|_.-~         /
  /        _-(  /-.__          (
 '._..--~~\`/\`/-'\\-._ \`~~-       ;
          /"=|  |" =\\~-...___.-~
         /=" /  | "==\\
        / = (_  \\  "==\\
       ;="=   \\_)  =="\\`;

const tabs = [
  { id: 'projects', label: 'Projects', number: 'I', subtitle: 'selected works', content: 'coming soon...' },
  { id: 'experience', label: 'Experience', number: 'II', subtitle: 'work history', content: 'coming soon...' },
  { id: 'education', label: 'Education', number: 'III', subtitle: 'academic background', content: 'coming soon...' },
  { id: 'achievements', label: 'Achievements', number: 'IV', subtitle: 'awards & honors', content: 'coming soon...' },
  { id: 'contact', label: 'Contact', number: 'V', subtitle: 'get in touch', isContact: true },
];
---

<!DOCTYPE html>
<html lang="en">

<Head title={seo.title} author={seo.author} siteUrl={siteUrl} />

<body>
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <MobileNav tabs={tabs} />

    <div class="container">
        <LeftPanel 
            name={seo.author} 
            subtitle="Breaking systems, rebuilding them better" 
            asciiArt={ASCII_ART} 
            currentYear={currentYear} 
        />
        <TabPanel tabs={tabs} />
    </div>

    <TypewriterScript quotes={quotes} />
    <InteractivityScript />
    <script src="/oneko.js" is:inline></script>
</body>

</html>
